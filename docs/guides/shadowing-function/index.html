<!doctype html><html lang=en data-bs-theme=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preload as=font href=https://wldt.github.io/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://wldt.github.io/fonts/vendor/jost/jost-v4-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://wldt.github.io/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><script src=https://wldt.github.io/js/color-mode.86a91f050a481d0a3f0c72ac26543cb6228c770875981c58dcbc008fd3f875c8.js integrity="sha256-hqkfBQpIHQo/DHKsJlQ8tiKMdwh1mBxY3LwAj9P4dcg="></script>
<link rel=stylesheet href=https://wldt.github.io/main.0af9c51e20d95bc50f4b362d9e4a86388fbb72686d2738b47c460fe7afbf7a37f7a6e59023a31c65825a76a90b236bb160ce040892aa70389cddd3cc69549b33.css integrity="sha512-CvnFHiDZW8UPSzYtnkqGOI+7cmhtJzi0fEYP56+/ejf3puWQI6McZYJadqkLI2uxYM4ECJKqcDic3dPMaVSbMw==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><title>Shadowing Function | WLDT</title><meta property="canonical" content="https://wldt.github.io/docs/guides/shadowing-function/"><meta name=description content="After the definition of the Physical Adapter it is time to start implementing the core of our DT through the definition of its shadowing function in charge of:"><meta property="robots" content="index, follow"><meta property="og:url" content="https://wldt.github.io/docs/guides/shadowing-function/"><meta property="og:title" content="Shadowing Function"><meta property="og:locale" content="en"><meta property="og:site_name" content="WLDT"><meta property="og:type" content="website"><meta property="og:section" content="docs"><meta property="og:description" content="After the definition of the Physical Adapter it is time to start implementing the core of our DT through the definition of its shadowing function in charge of:"><meta property="og:see_also" content="https://wldt.github.io/docs/introduction/dt-model/"><meta property="og:see_also" content="https://wldt.github.io/docs/introduction/dt-life-cycle/"><meta property="og:see_also" content="https://wldt.github.io/docs/introduction/library-structure-basic-concepts/"><meta property="og:see_also" content="https://wldt.github.io/docs/guides/physical-adapter/"><meta property="og:see_also" content="https://wldt.github.io/docs/guides/shadowing-function/"><meta property="og:see_also" content="https://wldt.github.io/docs/guides/digital-adapter/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Shadowing Function"><meta name=twitter:description content="After the definition of the Physical Adapter it is time to start implementing the core of our DT through the definition of its shadowing function in charge of:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://wldt.github.io/","name":"White Label Digital Twins","position":1},{"@type":"ListItem","item":"https://wldt.github.io/docs/","name":"Docs","position":2},{"@type":"ListItem","item":"https://wldt.github.io/docs/guides/","name":"Getting Started","position":3},{"@type":"ListItem","name":"Shadowing Function","position":4}]}</script><meta name=theme-color content><link rel=icon href=https://wldt.github.io/favicon.ico sizes=any><link rel=icon type=image/svg+xml href=https://wldt.github.io/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=https://wldt.github.io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://wldt.github.io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://wldt.github.io/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://wldt.github.io/site.webmanifest></head><body class="single section docs" data-bs-spy=scroll data-bs-target=#toc data-bs-root-margin="0px 0px -60%" data-bs-smooth-scroll=true tabindex=0><div class=sticky-top><header class="navbar navbar-expand-lg"><div class=container-lg><a class="navbar-brand me-auto me-lg-3" href=https://wldt.github.io/>WLDT</a>
<button type=button id=searchToggleMobile class="btn btn-link nav-link mx-2 d-lg-none" aria-label="Search website"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg></button>
<button class="btn btn-link d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasNavSection aria-controls=offcanvasNavSection aria-label="Open section navigation menu"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-dots-vertical" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-1 0a1 1 0 102 0 1 1 0 10-2 0"/><path d="M12 19m-1 0a1 1 0 102 0 1 1 0 10-2 0"/><path d="M12 5m-1 0a1 1 0 102 0 1 1 0 10-2 0"/></svg></button><div class="offcanvas offcanvas-start d-lg-none" tabindex=-1 id=offcanvasNavSection aria-labelledby=offcanvasNavSectionLabel><div class=offcanvas-header><h5 class=offcanvas-title id=offcanvasNavSectionLabel>Docs</h5><button type=button class="btn btn-link nav-link p-0" data-bs-dismiss=offcanvas aria-label=Close><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6 6 18"/><path d="M6 6l12 12"/></svg></button></div><div class=offcanvas-body><aside class="doks-sidebar mt-n3"><nav id=doks-docs-nav aria-label="Tertiary navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-0b79795d3efc95b9976c7c5b933afce2 aria-expanded=false>
Introduction</button><div class=collapse id=section-0b79795d3efc95b9976c7c5b933afce2><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://wldt.github.io/docs/introduction/library-structure-basic-concepts/>Library Structure & Basic Concepts</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/introduction/dt-model/>DT Model</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/introduction/dt-life-cycle/>DT Life Cycle</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/introduction/dt-events/>DT Events</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-bf647454e36069fd16f1a7a35cf6a865 aria-expanded=true>
Getting Started</button><div class="collapse show" id=section-bf647454e36069fd16f1a7a35cf6a865><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://wldt.github.io/docs/guides/physical-adapter/>Physical Adapter</a></li><li><a class="docs-link rounded active" href=https://wldt.github.io/docs/guides/shadowing-function/>Shadowing Function</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/guides/digital-adapter/>Digital Adapter</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/guides/dt-engine-dt-instance/>DT Engine & DT Instance</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/guides/digital-actions/>Digital Actions</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/guides/dt-relationships/>DT Relationships</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/guides/configurable-adapters/>Configurable Adapters</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/guides/storage-layer/>Storage Layer</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/guides/management-interface/>Management Interface</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/guides/logging/>Logging</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-89413bd312d0909efb85e6693f36cb89 aria-expanded=false>
Adapters</button><div class=collapse id=section-89413bd312d0909efb85e6693f36cb89><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://wldt.github.io/docs/adapters/mqtt-physical-adapter/>MQTT Physical Adapter</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/adapters/mqtt-digital-adapter/>MQTT Digital Adapter</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/adapters/http-digital-adapter/>HTTP Digital Adapter</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/adapters/coap-physical-adapter/>CoAP Physical Adapter</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/adapters/coap-digital-adapter/>CoAP Digital Adapter</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-3978929206deee2c125a1d732aae5545 aria-expanded=false>
Change Logs</button><div class=collapse id=section-3978929206deee2c125a1d732aae5545><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://wldt.github.io/docs/change-logs/change-log-0.3.0/>Change Log 0.3.0</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/change-logs/change-log-0.4.0/>Change Log 0.4.0</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/change-logs/change-log-0.5.0/>Change Log 0.5.0</a></li></ul></div></li></ul></nav></aside></div></div><button class="btn btn-link nav-link mx-2 order-3 d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasNavMain aria-controls=offcanvasNavMain aria-label="Open main navigation menu"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-menu" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="4" y1="8" x2="20" y2="8"/><line x1="4" y1="16" x2="20" y2="16"/></svg></button><div class="offcanvas offcanvas-end h-auto" tabindex=-1 id=offcanvasNavMain aria-labelledby=offcanvasNavMainLabel><div class=offcanvas-header><h5 class=offcanvas-title id=offcanvasNavMainLabel>WLDT</h5><button type=button class="btn btn-link nav-link p-0" data-bs-dismiss=offcanvas aria-label=Close><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6 6 18"/><path d="M6 6l12 12"/></svg></button></div><div class="offcanvas-body d-flex flex-column flex-lg-row justify-content-between"><ul class="navbar-nav flex-grow-1"><li class=nav-item><a class=nav-link href=https://wldt.github.io/docs/introduction/library-structure-basic-concepts/>Documentation</a></li><li class=nav-item><a class=nav-link href=https://wldt.github.io/blog/>Blog</a></li><li class=nav-item><a class=nav-link href=https://wldt.github.io/about/>About</a></li></ul><button type=button id=searchToggleDesktop class="btn btn-link nav-link p-2 d-none d-lg-block" aria-label="Search website"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg></button>
<button id=buttonColorMode class="btn btn-link mx-auto nav-link p-0 ms-lg-2 me-lg-1" type=button aria-label="Toggle theme"><svg data-bs-theme-value="dark" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-moon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 3c.132.0.263.0.393.0a7.5 7.5.0 007.92 12.446A9 9 0 1112 2.992z"/></svg><svg data-bs-theme-value="light" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-4 0a4 4 0 108 0 4 4 0 10-8 0m-5 0h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7-.7.7m0 11.4.7.7m-12.1-.7-.7.7"/></svg></button><ul id=socialMenu class="nav mx-auto flex-row order-lg-4"><li class=nav-item><a class="nav-link social-link" href=https://github.com/wldt><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg><small class="ms-2 visually-hidden">GitHub</small></a></li></ul></div></div></div></header></div><div class=modal id=searchModal tabindex=-1 aria-labelledby=searchModalLabel aria-hidden=true><div class="modal-dialog modal-dialog-scrollable modal-fullscreen-md-down"><div class=modal-content><div class=modal-header><h1 class="modal-title fs-5 visually-hidden" id=searchModalLabel>Search</h1><button type=button class="btn-close visually-hidden" data-bs-dismiss=modal aria-label=Close></button><div class="search-input flex-grow-1 d-none"><form id=search-form class=search-form action=# method=post accept-charset=utf-8 role=search><label for=query class=visually-hidden>Search</label><div class=d-flex><input type=search id=query name=query class="search-text form-control form-control-lg" placeholder=Search aria-label=Search maxlength=128 autocomplete=off>
<button type=button class="btn btn-link text-decoration-none px-0 ms-3 d-md-none" data-bs-dismiss=modal aria-label=Close>Cancel</button></div></form></div></div><div class=modal-body><p class="search-loading status message d-none mt-3 text-center">Loading search indexâ€¦</p><p class="search-no-recent message d-none mt-3 text-center">No recent searches</p><p class="search-no-results message d-none mt-3 text-center">No results for "<strong><span class=query-no-results>Query here</span></strong>"</p><div id=searchResults class=search-results></div><template><article class="search-result list-view"><div class="card my-3"><div class=card-body><header><h2 class="h5 title title-submitted mb-0"><a class="stretched-link text-decoration-none text-reset" href=#>Title here</a></h2><div class="submitted d-none"><time class=created-date>Date here</time></div></header><div class=content>Summary here</div></div></div></article></template></div><div class=modal-footer><ul class="list-inline me-auto d-none d-md-block"><li class=list-inline-item><kbd class=me-2><svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4m3 3-3-3 3-3"/></g></svg></kbd><span class=DocSearch-Label>to select</span></li><li class=list-inline-item><kbd class=me-2><svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8m3-3-3 3-3-3"/></g></svg></kbd><kbd class=me-2><svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8m3 3-3-3-3 3"/></g></svg></kbd><span class=DocSearch-Label>to navigate</span></li><li class=list-inline-item><kbd class=me-2><svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993.0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016s1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5s-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864.0 1.6425 1.031 1.5443 2.2492h-2.956"/></g></svg></kbd><span class=DocSearch-Label>to close</span></li></ul><p class=d-md-none>Search by <a class=text-decoration-none href=https://github.com/nextapps-de/flexsearch>FlexSearch</a></p></div></div></div></div><div class="wrap container-lg" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-0b79795d3efc95b9976c7c5b933afce2 aria-expanded=false>
Introduction</button><div class=collapse id=section-0b79795d3efc95b9976c7c5b933afce2><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://wldt.github.io/docs/introduction/library-structure-basic-concepts/>Library Structure & Basic Concepts</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/introduction/dt-model/>DT Model</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/introduction/dt-life-cycle/>DT Life Cycle</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/introduction/dt-events/>DT Events</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-bf647454e36069fd16f1a7a35cf6a865 aria-expanded=true>
Getting Started</button><div class="collapse show" id=section-bf647454e36069fd16f1a7a35cf6a865><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://wldt.github.io/docs/guides/physical-adapter/>Physical Adapter</a></li><li><a class="docs-link rounded active" href=https://wldt.github.io/docs/guides/shadowing-function/>Shadowing Function</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/guides/digital-adapter/>Digital Adapter</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/guides/dt-engine-dt-instance/>DT Engine & DT Instance</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/guides/digital-actions/>Digital Actions</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/guides/dt-relationships/>DT Relationships</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/guides/configurable-adapters/>Configurable Adapters</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/guides/storage-layer/>Storage Layer</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/guides/management-interface/>Management Interface</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/guides/logging/>Logging</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-89413bd312d0909efb85e6693f36cb89 aria-expanded=false>
Adapters</button><div class=collapse id=section-89413bd312d0909efb85e6693f36cb89><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://wldt.github.io/docs/adapters/mqtt-physical-adapter/>MQTT Physical Adapter</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/adapters/mqtt-digital-adapter/>MQTT Digital Adapter</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/adapters/http-digital-adapter/>HTTP Digital Adapter</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/adapters/coap-physical-adapter/>CoAP Physical Adapter</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/adapters/coap-digital-adapter/>CoAP Digital Adapter</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-3978929206deee2c125a1d732aae5545 aria-expanded=false>
Change Logs</button><div class=collapse id=section-3978929206deee2c125a1d732aae5545><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://wldt.github.io/docs/change-logs/change-log-0.3.0/>Change Log 0.3.0</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/change-logs/change-log-0.4.0/>Change Log 0.4.0</a></li><li><a class="docs-link rounded" href=https://wldt.github.io/docs/change-logs/change-log-0.5.0/>Change Log 0.5.0</a></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links></div></nav><main class="docs-content col-lg-11 col-xl-9"><nav aria-label=breadcrumb><ol class=breadcrumb><li class=breadcrumb-item><a href=https://wldt.github.io/>Home</a></li><li class=breadcrumb-item><a href=https://wldt.github.io/docs/>Docs</a></li><li class=breadcrumb-item><a href=https://wldt.github.io/docs/guides/>Getting Started</a></li><li class="breadcrumb-item active" aria-current=page>Shadowing Function</li></ol></nav><h1>Shadowing Function</h1><nav class="toc-mobile d-xl-none" aria-label="Quaternary navigation"></nav><p>After the definition of the Physical Adapter it is time to start implementing the core of our DT through the definition of
its shadowing function in charge of:</p><ul><li>Handle received PAD from Physical Adapters in order to device which properties, events, relationships or actions available on connected physical twins should be mapped and managed into the DT State</li><li>Manage incoming notifications/callbacks associated to the variation of physical properties (e.g, temperature variation) or the generation of physical event (e.g., overheating)</li><li>Process action requests from the digital world that should be validated and forward to the correct Physical Adapter in order to trigger the associated actions on the physical world</li></ul><p>The Shadowing Function has the responsibility to build and maintain the updated state of the Digital Twin
The internal variable of any WLDT Shadowing Function (available through the base class <code>ShadowingFunction</code>) used to do that is <code>DigitalTwinStateManager</code> accessible through the variable: <code>this.digitalTwinStateManager</code></p><p>When the Shadowing Function has to compute the new DT State it can now work with the following method to handle DT State Transition:</p><ul><li>Start the DT State Transaction: <code>startStateTransaction()</code></li><li>DT State variation methods such as:<ul><li><code>createProperty()</code></li><li><code>updateProperty()</code></li><li><code>updatePropertyValue()</code></li><li><code>deleteProperty()</code></li><li><code>enableAction()</code></li><li><code>updateAction()</code></li><li><code>disableAction()</code></li><li><code>registerEvent()</code></li><li><code>updateRegisteredEvent()</code></li><li><code>unRegisterEvent()</code></li><li><code>createRelationship()</code></li><li><code>addRelationshipInstance()</code></li><li><code>deleteRelationship()</code></li><li><code>deleteRelationshipInstance()</code></li></ul></li><li>At the end the transaction can be committed using the method: <code>commitStateTransaction()</code></li></ul><p>To access the current DT State the Shadowing Function implementation can use the method <code>this.digitalTwinStateManager.getDigitalTwinState()</code>
The information available on the DT State are:</p><ul><li><code>properties</code>: List of Properties with their values (if available)</li><li><code>actions</code>: List of Actions that can be called on the DT</li><li><code>events</code>: List of Events that can be generated by the DT</li><li><code>relationships</code>: List of Relationships and their instances (if available)</li><li><code>evaluationInstant</code>: The timestamp representing the evaluation instant of the DT state</li></ul><p>Available main methods on that class instance are:</p><ul><li>Properties:<ul><li><code>getProperty(String propertyKey)</code>: Retrieves if present the target DigitalTwinStateProperty by Key</li><li><code>containsProperty(String propertyKey)</code>: Checks if a target Property Key is already available in the current Digital Twin&rsquo;s State</li><li><code>getPropertyList()</code>: Loads the list of available Properties (described by the class DigitalTwinStateProperty) available on the Digital Twin&rsquo;s State</li><li><code>createProperty(DigitalTwinStateProperty&lt;?> dtStateProperty)</code>: Allows the creation of a new Property on the Digital Twin&rsquo;s State through the class DigitalTwinStateProperty</li><li><code>readProperty(String propertyKey)</code>: Retrieves if present the target DigitalTwinStateProperty by Key</li><li><code>updateProperty(DigitalTwinStateProperty&lt;?> dtStateProperty)</code>: Updates the target property using the DigitalTwinStateProperty and the associated Property Key field</li><li><code>deleteProperty(String propertyKey)</code>: Deletes the target property identified by the specified key</li></ul></li><li>Actions:<ul><li><code>containsAction(String actionKey)</code>: Checks if a Digital Twin State Action with the specified key is correctly registered</li><li><code>getAction(String actionKey)</code>: Loads the target DigitalTwinStateAction by key</li><li><code>getActionList()</code>: Gets the list of available Actions registered on the Digital Twin&rsquo;s State</li><li><code>enableAction(DigitalTwinStateAction digitalTwinStateAction)</code>: Enables and registers the target Action described through an instance of the DigitalTwinStateAction class</li><li><code>updateAction(DigitalTwinStateAction digitalTwinStateAction)</code>: Update the already registered target Action described through an instance of the DigitalTwinStateAction class</li><li><code>disableAction(String actionKey)</code>: Disables and unregisters the target Action described through an instance of the DigitalTwinStateAction class</li></ul></li><li>Events:<ul><li><code>containsEvent(String eventKey)</code>: Check if a Digital Twin State Event with the specified key is correctly registered</li><li><code>getEvent(String eventKey)</code>: Return the description of a registered Digital Twin State Event according to its Key</li><li><code>getEventList()</code>: Return the list of existing and registered Digital Twin State Events</li><li><code>registerEvent(DigitalTwinStateEvent digitalTwinStateEvent)</code>: Register a new Digital Twin State Event</li><li><code>updateRegisteredEvent(DigitalTwinStateEvent digitalTwinStateEvent)</code>: Update the registration and signature of an existing Digital Twin State Event</li><li><code>unRegisterEvent(String eventKey)</code>: Un-register a Digital Twin State Event</li><li><code>notifyDigitalTwinStateEvent(DigitalTwinStateEventNotification&lt;?> digitalTwinStateEventNotification)</code>: Method to notify the occurrence of the target Digital Twin State Event</li></ul></li><li>Relationships:<ul><li><code>containsRelationship(String relationshipName)</code>: Checks if a Relationship Name is already available in the current Digital Twin&rsquo;s State</li><li><code>createRelationship(DigitalTwinStateRelationship&lt;?> relationship)</code>: Creates a new Relationships (described by the class DigitalTwinStateRelationship) in the Digital Twin&rsquo;s State</li><li><code>addRelationshipInstance(String name, DigitalTwinStateRelationshipInstance&lt;?> instance)</code>: Adds a new Relationship instance described through the class DigitalTwinStateRelationshipInstance and identified through its name</li><li><code>getRelationshipList()</code>: Loads the list of existing relationships on the Digital Twin&rsquo;s State through a list of DigitalTwinStateRelationship</li><li><code>getRelationship(String name)</code>: Gets a target Relationship identified through its name and described through the class DigitalTwinStateRelationship</li><li><code>deleteRelationship(String name)</code>: Deletes a target Relationship identified through its name</li><li><code>deleteRelationshipInstance(String relationshipName, String instanceKey)</code>: Deletes the target Relationship Instance using relationship name and instance Key</li></ul></li></ul><p>The basic library class that we are going to extend is called <code>ShadowingFunction</code> and creating a new class named <code>DemoShadowingFunction</code> the resulting
code is the same after implementing required methods the basic constructor with the id String parameter.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span> <span class=nn>it.wldt.adapter.digital.event.DigitalActionWldtEvent</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>it.wldt.adapter.physical.PhysicalAssetDescription</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>it.wldt.adapter.physical.event.PhysicalAssetEventWldtEvent</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>it.wldt.adapter.physical.event.PhysicalAssetPropertyWldtEvent</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>it.wldt.adapter.physical.event.PhysicalAssetRelationshipInstanceCreatedWldtEvent</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>it.wldt.adapter.physical.event.PhysicalAssetRelationshipInstanceDeletedWldtEvent</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>it.wldt.core.model.ShadowingModelFunction</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.Map</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>DemoShadowingFunction</span> <span class=kd>extends</span> <span class=n>ShadowingModelFunction</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>DemoShadowingFunction</span><span class=o>(</span><span class=n>String</span> <span class=n>id</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=n>id</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//// Shadowing Function Management Callbacks ////
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onCreate</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onStart</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onStop</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//// Bound LifeCycle State Management Callbacks ////
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onDigitalTwinBound</span><span class=o>(</span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>PhysicalAssetDescription</span><span class=o>&gt;</span> <span class=n>adaptersPhysicalAssetDescriptionMap</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onDigitalTwinUnBound</span><span class=o>(</span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>PhysicalAssetDescription</span><span class=o>&gt;</span> <span class=n>map</span><span class=o>,</span> <span class=n>String</span> <span class=n>s</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onPhysicalAdapterBidingUpdate</span><span class=o>(</span><span class=n>String</span> <span class=n>s</span><span class=o>,</span> <span class=n>PhysicalAssetDescription</span> <span class=n>physicalAssetDescription</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//// Physical Property Variation Callback ////
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onPhysicalAssetPropertyVariation</span><span class=o>(</span><span class=n>PhysicalAssetPropertyWldtEvent</span><span class=o>&lt;?&gt;</span> <span class=n>physicalAssetPropertyWldtEvent</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//// Physical Event Notification Callback ////
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onPhysicalAssetEventNotification</span><span class=o>(</span><span class=n>PhysicalAssetEventWldtEvent</span><span class=o>&lt;?&gt;</span> <span class=n>physicalAssetEventWldtEvent</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//// Physical Relationships Notification Callbacks ////
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onPhysicalAssetRelationshipEstablished</span><span class=o>(</span><span class=n>PhysicalAssetRelationshipInstanceCreatedWldtEvent</span><span class=o>&lt;?&gt;</span> <span class=n>physicalAssetRelationshipInstanceCreatedWldtEvent</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onPhysicalAssetRelationshipDeleted</span><span class=o>(</span><span class=n>PhysicalAssetRelationshipInstanceDeletedWldtEvent</span><span class=o>&lt;?&gt;</span> <span class=n>physicalAssetRelationshipInstanceDeletedWldtEvent</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//// Digital Action Received Callbacks ////
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onDigitalActionEvent</span><span class=o>(</span><span class=n>DigitalActionWldtEvent</span><span class=o>&lt;?&gt;</span> <span class=n>digitalActionWldtEvent</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>The methods <code>onCreate()</code>, <code>onStart()</code> and <code>onStop()</code> are used to receive callbacks from the DT&rsquo;s core when the Shadowing Function has been effectively created within the twin, is started or stopped
according to the evolution of its life cycle. In our initial implementation we are not implementing any of them but they can be useful to trigger specific behaviours according to the different phases.</p><p>The first method that we have to implement in order to analyze received PAD and build the Digital Twin State in terms of properties, events, relationships and available actions is
the <code>onDigitalTwinBound(Map&lt;String, PhysicalAssetDescription> map)</code> method. In our initial implementation we just pass through all the received characteristics recevied from each connected
Physical Adapter mapping every physical entity into the DT&rsquo;s state without any change or adaptation (Of course complex behaviour can be implemented to customized the digitalization process).</p><p>Through the following method we implement the following behaviour:</p><ul><li>Analyze each received PAD from each connected and active Physical Adapter (in our case we will have just 1 Physical Adapter)</li><li>Iterate over all the received Properties for each PAD and create the same Property on the Digital Twin State</li><li>Start observing target Physical Properties in order to receive notification callback about physical variation through the method <code>observePhysicalAssetProperty(property);</code></li><li>Analyze received PAD&rsquo;s Events declaration and recreates them also on the DT&rsquo;s State</li><li>Start observing target Physical Event in order to receive notification callback about physical event generation through the method <code>observePhysicalAssetEvent(event);</code></li><li>Check available Physical Action and enable them on the DT&rsquo;s State. Enabled Digital Action are automatically observed by the Shadowing Function in order to receive action requests from active Digital Adapters</li></ul><p>The possibility to manually observe Physical Properties and Event has been introduced to allow the Shadowing Function to decide what
to do according to the nature of the property or of the target event. For example in some cases with static properties it will not be necessary
to observe any variation, and it will be enough to read the initial value to build the digital replica of that specific property.</p><p>Since the DT State is managed through the <code>DigitalTwinStateManager</code> class all the changes and variation should be applied on the
DT ShadowingFunction using the previously presented transaction management and the correct call of methods <code>startStateTransaction()</code> and <code>commitStateTransaction()</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Override</span>
</span></span><span class=line><span class=cl><span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onDigitalTwinBound</span><span class=o>(</span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>PhysicalAssetDescription</span><span class=o>&gt;</span> <span class=n>adaptersPhysicalAssetDescriptionMap</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=c1>// NEW from 0.3.0 -&gt; Start DT State Change Transaction  
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>this</span><span class=o>.</span><span class=na>digitalTwinStateManager</span><span class=o>.</span><span class=na>startStateTransaction</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=c1>//Iterate over all the received PAD from connected Physical Adapters
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>adaptersPhysicalAssetDescriptionMap</span><span class=o>.</span><span class=na>values</span><span class=o>().</span><span class=na>forEach</span><span class=o>(</span><span class=n>pad</span> <span class=o>-&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>//Iterate over all the received PAD from connected Physical Adapters
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>adaptersPhysicalAssetDescriptionMap</span><span class=o>.</span><span class=na>values</span><span class=o>().</span><span class=na>forEach</span><span class=o>(</span><span class=n>pad</span> <span class=o>-&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>pad</span><span class=o>.</span><span class=na>getProperties</span><span class=o>().</span><span class=na>forEach</span><span class=o>(</span><span class=n>property</span> <span class=o>-&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=c1>//Create and write the property on the DT&#39;s State
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=k>this</span><span class=o>.</span><span class=na>digitalTwinState</span><span class=o>.</span><span class=na>createProperty</span><span class=o>(</span><span class=k>new</span> <span class=n>DigitalTwinStateProperty</span><span class=o>&lt;&gt;(</span><span class=n>property</span><span class=o>.</span><span class=na>getKey</span><span class=o>(),(</span><span class=n>Double</span><span class=o>)</span> <span class=n>property</span><span class=o>.</span><span class=na>getInitialValue</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>                    <span class=c1>//Start observing the variation of the physical property in order to receive notifications
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=c1>//Without this call the Shadowing Function will not receive any notifications or callback about
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=c1>//incoming physical property of the target type and with the target key
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=k>this</span><span class=o>.</span><span class=na>observePhysicalAssetProperty</span><span class=o>(</span><span class=n>property</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>                <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>Exception</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>e</span><span class=o>.</span><span class=na>printStackTrace</span><span class=o>();</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>//Iterate over available declared Physical Events for the target Physical Adapter&#39;s PAD
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>pad</span><span class=o>.</span><span class=na>getEvents</span><span class=o>().</span><span class=na>forEach</span><span class=o>(</span><span class=n>event</span> <span class=o>-&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    <span class=c1>//Instantiate a new DT State Event with the same key and type
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>DigitalTwinStateEvent</span> <span class=n>dtStateEvent</span> <span class=o>=</span> <span class=k>new</span> <span class=n>DigitalTwinStateEvent</span><span class=o>(</span><span class=n>event</span><span class=o>.</span><span class=na>getKey</span><span class=o>(),</span> <span class=n>event</span><span class=o>.</span><span class=na>getType</span><span class=o>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    <span class=c1>//Create and write the event on the DT&#39;s State
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=k>this</span><span class=o>.</span><span class=na>digitalTwinState</span><span class=o>.</span><span class=na>registerEvent</span><span class=o>(</span><span class=n>dtStateEvent</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    <span class=c1>//Start observing the variation of the physical event in order to receive notifications
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=c1>//Without this call the Shadowing Function will not receive any notifications or callback about
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=c1>//incoming physical events of the target type and with the target key
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=k>this</span><span class=o>.</span><span class=na>observePhysicalAssetEvent</span><span class=o>(</span><span class=n>event</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>Exception</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>e</span><span class=o>.</span><span class=na>printStackTrace</span><span class=o>();</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>//Iterate over available declared Physical Actions for the target Physical Adapter&#39;s PAD
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>pad</span><span class=o>.</span><span class=na>getActions</span><span class=o>().</span><span class=na>forEach</span><span class=o>(</span><span class=n>action</span> <span class=o>-&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    <span class=c1>//Instantiate a new DT State Action with the same key and type
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>DigitalTwinStateAction</span> <span class=n>dtStateAction</span> <span class=o>=</span> <span class=k>new</span> <span class=n>DigitalTwinStateAction</span><span class=o>(</span><span class=n>action</span><span class=o>.</span><span class=na>getKey</span><span class=o>(),</span> <span class=n>action</span><span class=o>.</span><span class=na>getType</span><span class=o>(),</span> <span class=n>action</span><span class=o>.</span><span class=na>getContentType</span><span class=o>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    <span class=c1>//Enable the action on the DT&#39;s State
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=k>this</span><span class=o>.</span><span class=na>digitalTwinState</span><span class=o>.</span><span class=na>enableAction</span><span class=o>(</span><span class=n>dtStateAction</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>Exception</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>e</span><span class=o>.</span><span class=na>printStackTrace</span><span class=o>();</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=o>});</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=c1>// NEW from 0.3.0 -&gt; Commit DT State Change Transaction to apply the changes on the DT State and notify about the change
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=o>.</span><span class=na>digitalTwinStateManager</span><span class=o>.</span><span class=na>commitStateTransaction</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Start observation to receive all incoming Digital Action through active Digital Adapter
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>//Without this call the Shadowing Function will not receive any notifications or callback about
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>//incoming request to execute an exposed DT&#39;s Action
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>observeDigitalActionEvents</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Notify the DT Core that the Bounding phase has been correctly completed and the DT has evaluated its
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>//internal status according to what is available and declared through the Physical Adapters
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>notifyShadowingSync</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>}</span><span class=k>catch</span> <span class=o>(</span><span class=n>Exception</span> <span class=n>e</span><span class=o>){</span>
</span></span><span class=line><span class=cl>        <span class=n>e</span><span class=o>.</span><span class=na>printStackTrace</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>In particular the method <code>observeDigitalActionEvents()</code> should be called start the observation of digital actions and
to receive all incoming Digital Action through active Digital Adapters.
Without this call the Shadowing Function will not receive any notifications or callback about
incoming request to execute an exposed DT&rsquo;s Action. Of course, we have to call this method if we are mapping any digital
action in our DT.</p><p>Another fundamental method is <code>notifyShadowingSync()</code> used to notify the DT Core that
the Bounding phase has been correctly completed and the DT has evaluated its internal status according
to what is available and declared through the Physical Adapters.</p><p>As mentioned, in the previous example the Shadowing Function does not apply any control or check on the nature of declared
physical property. Of course in order to have a more granular control, it will be possible to use property <code>Key</code> or any other field or even
the type of the instance through an <code>instanceof</code> check to implement different controls and behaviours.</p><p>A variation (only for the property management code) to the previous method can be the following:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//Iterate over available declared Physical Property for the target Physical Adapter&#39;s PAD 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>pad</span><span class=o>.</span><span class=na>getProperties</span><span class=o>().</span><span class=na>forEach</span><span class=o>(</span><span class=n>property</span> <span class=o>-&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Check property Key and Instance of to validate that is a Double
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span><span class=o>(</span><span class=n>property</span><span class=o>.</span><span class=na>getKey</span><span class=o>().</span><span class=na>equals</span><span class=o>(</span><span class=s>&#34;temperature-property-key&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=o>&amp;&amp;</span> <span class=n>property</span><span class=o>.</span><span class=na>getInitialValue</span><span class=o>()</span> <span class=o>!=</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl>                <span class=o>&amp;&amp;</span>  <span class=n>property</span><span class=o>.</span><span class=na>getInitialValue</span><span class=o>()</span> <span class=k>instanceof</span> <span class=n>Double</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>//Instantiate a new DT State Property of the right type, the same key and initial value
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>DigitalTwinStateProperty</span><span class=o>&lt;</span><span class=n>Double</span><span class=o>&gt;</span> <span class=n>dtStateProperty</span> <span class=o>=</span> <span class=k>new</span> <span class=n>DigitalTwinStateProperty</span><span class=o>&lt;</span><span class=n>Double</span><span class=o>&gt;(</span><span class=n>property</span><span class=o>.</span><span class=na>getKey</span><span class=o>(),(</span><span class=n>Double</span><span class=o>)</span> <span class=n>property</span><span class=o>.</span><span class=na>getInitialValue</span><span class=o>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>//Create and write the property on the DT&#39;s State
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>this</span><span class=o>.</span><span class=na>digitalTwinState</span><span class=o>.</span><span class=na>createProperty</span><span class=o>(</span><span class=n>dtStateProperty</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>//Start observing the variation of the physical property in order to receive notifications
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>//Without this call the Shadowing Function will not receive any notifications or callback about
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>//incoming physical property of the target type and with the target key
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>this</span><span class=o>.</span><span class=na>observePhysicalAssetProperty</span><span class=o>(</span><span class=n>property</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>Exception</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>e</span><span class=o>.</span><span class=na>printStackTrace</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>});</span>
</span></span></code></pre></div><p>The next method that we have to implement in order to properly define and implement the behaviour of our DT through its
ShadowingModelFunction are:</p><ul><li><code>onPhysicalAssetPropertyVariation</code>: Method called when a new variation for a specific Physical Property has been detected
by the associated Physical Adapter. The method receive as parameter a specific WLDT Event called <code>PhysicalAssetPropertyWldtEvent&lt;?> physicalPropertyEventMessage</code>
containing all the information generated by the Physical Adapter upon the variation of the monitored physical counterpart.</li><li><code>onPhysicalAssetEventNotification</code>: Callback method used to be notified by a PhysicalAdapter about the generation of a Physical Event.
As for the previous method, also this function receive a WLDT Event parameter of type <code>onPhysicalAssetEventNotification(PhysicalAssetEventWldtEvent&lt;?> physicalAssetEventWldtEvent)</code>)
containing all the field of the generated physical event.</li><li><code>onDigitalActionEvent</code>: On the opposite this method is triggered from one of the active Digital Adapter when an Action request has been received on the Digital Interface.
The method receive as parameter an instance of the WLDT Event class <code>DigitalActionWldtEvent&lt;?> digitalActionWldtEvent</code> describing the target digital action request and the associated
body.</li></ul><p>For the <code>onPhysicalAssetPropertyVariation</code> a simple implementation in charge ONLY of mapping the new Physical Property value
into the corresponding DT&rsquo;State property can be implemented as follows:</p><p>The DT State transaction management should be applied in the point of the code where the
Shadowing Function receive a variation from the Physical world through a target adapter and the callback method <code>onPhysicalAssetPropertyVariation(...)</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Override</span>
</span></span><span class=line><span class=cl><span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onPhysicalAssetPropertyVariation</span><span class=o>(</span><span class=n>PhysicalAssetPropertyWldtEvent</span><span class=o>&lt;?&gt;</span> <span class=n>physicalPropertyEventMessage</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=c1>//Update Digital Twin State  
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>//NEW from 0.3.0 -&gt; Start State Transaction
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>this</span><span class=o>.</span><span class=na>digitalTwinStateManager</span><span class=o>.</span><span class=na>startStateTransaction</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=o>.</span><span class=na>digitalTwinState</span><span class=o>.</span><span class=na>updateProperty</span><span class=o>(</span><span class=k>new</span> <span class=n>DigitalTwinStateProperty</span><span class=o>&lt;&gt;(</span><span class=n>physicalPropertyEventMessage</span><span class=o>.</span><span class=na>getPhysicalPropertyId</span><span class=o>(),</span> <span class=n>physicalPropertyEventMessage</span><span class=o>.</span><span class=na>getBody</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=c1>//NEW from 0.3.0 -&gt; Commit State Transaction
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>this</span><span class=o>.</span><span class=na>digitalTwinStateManager</span><span class=o>.</span><span class=na>commitStateTransaction</span><span class=o>();</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>    <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>WldtDigitalTwinStatePropertyException</span> <span class=o>|</span> <span class=n>WldtDigitalTwinStatePropertyBadRequestException</span> <span class=o>|</span> <span class=n>WldtDigitalTwinStatePropertyNotFoundException</span> <span class=o>|</span> <span class=n>WldtDigitalTwinStateException</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>e</span><span class=o>.</span><span class=na>printStackTrace</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>In this case as reported in the code, we call the method <code>this.digitalTwinState.updateProperty</code> on the Shadowing Function
in order to update an existing DT&rsquo;State property (previously created in the <code>onDigitalTwinBound</code> method).
To update the value we directly use the received data on the <code>PhysicalAssetPropertyWldtEvent</code> without any additional check
or change that might be instead needed in advanced examples.</p><p>Following the same principle, a simplified digital mapping between physical and digital state upon the receving of a physical event variation can be the following:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Override</span>
</span></span><span class=line><span class=cl><span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onPhysicalAssetEventNotification</span><span class=o>(</span><span class=n>PhysicalAssetEventWldtEvent</span><span class=o>&lt;?&gt;</span> <span class=n>physicalAssetEventWldtEvent</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>digitalTwinStateManager</span><span class=o>.</span><span class=na>notifyDigitalTwinStateEvent</span><span class=o>(</span><span class=k>new</span> <span class=n>DigitalTwinStateEventNotification</span><span class=o>&lt;&gt;(</span><span class=n>physicalAssetEventWldtEvent</span><span class=o>.</span><span class=na>getPhysicalEventKey</span><span class=o>(),</span> <span class=n>physicalAssetEventWldtEvent</span><span class=o>.</span><span class=na>getBody</span><span class=o>(),</span> <span class=n>physicalAssetEventWldtEvent</span><span class=o>.</span><span class=na>getCreationTimestamp</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>WldtDigitalTwinStateEventNotificationException</span> <span class=o>|</span> <span class=n>EventBusException</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>e</span><span class=o>.</span><span class=na>printStackTrace</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>With respect to events management, we use the Shadowint Function method <code>this.digitalTwinState.notifyDigitalTwinStateEvent</code> to notify
the other DT Components (e.g., Digital Adapters) the incoming Physical Event by creating a new instance of a <code>DigitalTwinStateEventNotification</code> class
containing all the information associated to the event. Of course, additional controls and checks can be introduced in this
method validating and processing the incoming physical message to define complex behaviours.</p><p>The last method that we are going to implement is the <code>onDigitalActionEvent</code> one where we have to handle an incoming
Digital Action request associated to an Action declared on the DT&rsquo;s State in the <code>onDigitalTwinBound</code> method.
In that case the Digital Action should be forwarded to the Physical Interface in order to be sent to the physical counterpart
for the effective execution.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Override</span>
</span></span><span class=line><span class=cl><span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onDigitalActionEvent</span><span class=o>(</span><span class=n>DigitalActionWldtEvent</span><span class=o>&lt;?&gt;</span> <span class=n>digitalActionWldtEvent</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>publishPhysicalAssetActionWldtEvent</span><span class=o>(</span><span class=n>digitalActionWldtEvent</span><span class=o>.</span><span class=na>getActionKey</span><span class=o>(),</span> <span class=n>digitalActionWldtEvent</span><span class=o>.</span><span class=na>getBody</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>EventBusException</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>e</span><span class=o>.</span><span class=na>printStackTrace</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Also in that case we are forwarding the incoming Digital Action request described through the class <code>DigitalActionWldtEvent</code>
to the Physical Adapter with the method of the Shadowing Function denoted as <code>this.publishPhysicalAssetActionWldtEvent</code> and
passing directly the action key and the target Body. No additional processing or validation have been introduced here, but they might
be required in advanced scenario in order to properly adapt incoming digital action request to what is effectively expected on the
physical counterpart.</p><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"><div class=last-modified><a href=https://github.com/wldt/wldt.github.io/commit/1f64921170c77189cd8e7e8b4328af6cf67d9fa9><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Last updated on January 9, 2026</a></div><div class=edit-page><a href=https://github.com/wldt/wldt.github.io/blob/main/content//docs/guides/shadowing-function.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></div></div><div class="page-nav d-flex flex-column flex-sm-row"><div class="card w-100"><div class="card-body d-flex"><div class="d-flex flex-column justify-content-center"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-left" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12h14"/><path d="M5 12l6 6"/><path d="M5 12l6-6"/></svg></div><div class="d-flex flex-column"><div class=text-body-secondary>Prev</div><a href=https://wldt.github.io/docs/guides/physical-adapter/ class="stretched-link text-reset text-decoration-none">Physical Adapter</a></div></div></div><div class=m-2></div><div class="card text-end w-100"><div class="card-body d-flex justify-content-end"><div class="d-flex flex-column"><div class=text-body-secondary>Next</div><a href=https://wldt.github.io/docs/guides/digital-adapter/ class="stretched-link text-reset text-decoration-none">Digital Adapter</a></div><div class="d-flex flex-column justify-content-center"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-right" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12h14"/><path d="M13 18l6-6"/><path d="M13 6l6 6"/></svg></div></div></div></div></main></div></div></div><footer class="footer text-muted"><div class=container-lg><div class=row><div class="col-lg-8 text-center text-lg-start"><ul class=list-inline><li class=list-inline-item><a class=text-muted href=https://wldt.github.io/privacy/>Privacy Policy</a></li></ul></div><div class="col-lg-8 text-center text-lg-end"><ul class=list-inline><li class=list-inline-item>Brought to you by <a class=text-muted href=https://gethyas.com/>Hyas</a></li></ul></div></div></div></footer><script async src=https://wldt.github.io/js/app.1e84dcdaa5ccef6fe83f6d88ac1e444a1f237111cfa2a7a97427f758e9c27ef4.js integrity="sha256-HoTc2qXM72/oP22IrB5ESh8jcRHPoqepdCf3WOnCfvQ="></script>
<script async src=https://wldt.github.io/js/flexsearch.dc00caef2c3490dbab3c345ed0d4133b0aafb803efeb21c3df80776d6d3ea821.js integrity="sha256-3ADK7yw0kNurPDRe0NQTOwqvuAPv6yHD34B3bW0+qCE="></script><script async src=https://wldt.github.io/js/search-modal.c4c023efcdee308e4b5f1110afe1db6b1656f217e67aa7efe54e2f4bf2feccf8.js integrity="sha256-xMAj783uMI5LXxEQr+HbaxZW8hfmeqfv5U4vS/L+zPg="></script><div class="d-inline-flex fixed-bottom-right pb-4 pe-4"><button id=toTop type=button class="btn btn-primary rounded-circle ms-auto p-2"><span class=visually-hidden>Top</span><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-up" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 15l6-6 6 6"/></svg></button></div></body></html>